# Enable rewrites
RewriteEngine On
Options -MultiViews
RewriteBase /

# 1) Serve real files or folders as-is
RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^ - [L]

# 2) If someone requests .php or .html directly, redirect to clean URL
# Use 308 so POST bodies are preserved across the redirect
RewriteCond %{THE_REQUEST} \s/+(.+?)\.(php|html)\s [NC]
RewriteRule ^ %1 [R=308,L]

# 3) Internally route clean URLs to .php when that file exists
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule ^(.+?)/?$ $1.php [L]

# 4) Optionally support clean URLs for .html too
RewriteCond %{REQUEST_FILENAME}.html -f
RewriteRule ^(.+?)/?$ $1.html [L]

# 5) Default index files
DirectoryIndex index.php index.html